Регулярные выражения - мощное средство поиска и замены в строке. 

В JavaScript регулярные выражения реализованы отдельным объектом RegExp и интегрированы в методы строк.

**Регулярные выражения**

Регулярка состоит из *шаблона* (также говорят "паттерн") и необязательныъ *флагов*.

"Длинный синтаксис":

```js
const regexp = new RegExp("шаблон", "флаги");
```

А также короткий синтаксик, использующие слеши `/`:

```js
regexp = /шаблон/; // без флагов
regexp = /шаблон/gmi; // с флагами gmi (будут описаны далее)
```

Слеши `/.../` говорят JavaScript о том, что это регулярное выражение. Они играют здесь ту же роль, что и кавычки для обозначения строк.

Основная разница между этими двумя способами создания заключается в том, что слеши `/.../` не допускают никаких вставок переменных (наподобие возможных в строках через `${...}`). Они полностью статичны.

Слеши используются, когда мы на момент написания кода точно знаем, каким будет регулярное выражение – и это большинство ситуаций. А `new RegExp` – когда мы хотим создать регулярное выражение «на лету» из динамически сгенерированной строки, например (строка из `prompt`).

**Флаги**

Регулярки могут иметь флаги, которые влияют на поиск. В JavaScript их всего шесть:

- `i`

С этим флагом поиск не зависит от регистра: нет разницы между `A` и `a`.

- `g`

С этим флагом поиск ищет все совпадения, без него – только первое.

- `m`

Многострочный режим. Рассматривается в [[7.5 Многострочный режим якорей, флаг 'm']]

- `s`

Включает режим «dotall», при котором точка `.` может соответствовать символу перевода строки `\n`. Рассматривается в главе [[7.2 Символьные классы]]

- `u`

Включает полную поддержку юникода. Флаг разрешает корректную обработку суррогатных пар. Рассматривается в [[7.3 Юникод, флаг 'u' и класс p{...}]]

- `y`

Режим поиска на конкретной позиции в тексте. Рассматривается в [[7.16 Поиск на заднной позиции, флаг 'y']]

**Поиск: str.match**

Как уже говорилось, использование регулярных выражений интегрировано в методы строк.

Метод `str.match(regexp)` для строки `str` возвращает совпадения с регулярным выражением `regexp`.

У этого метода есть 3 режима работы:
1. Если у регулярного выражения есть флаг `g`, то он возвращает массив всех совпадений:
```js
const str = 'Любо, братцы, любо!';

console.log( str.match(/любо/gi) ); // Любо,любо (массив из 2х подстрок-совпадений)
```

2. Если такого флага нет, то возвращает только первое совпадение в виде массива, в котором по индексу `0` находится совпадение, и есть свойства с дополнительной информацией о нём:
```js
const str = 'Любо, братцы, любо!';

const result = str.match(/любо/i); // без флага g

console.log( result[0] ); // Любо (первое совпадение)
console.log( result.length ); // 1

// Доп. информация:
console.log( result.index ); // 0 (позиция совпадения)
console.log( result.input );  // Любо, братцы, любо! (исходная строка)
```

В этом массиве могут быть и другие индексы, кроме `0`, если часть регулярного выражения выделена в скобки. Мы разберём это в главе [[7.11 Скобочные группы]].

3. И, наконец, если совпадений нет, то, вне зависимости от наличия флага `g`, возвращается `null`.

Если хочется, чтобы результатом всегда был массив, можно написать так:
```js
const matches = 'JavaScript'.match(/HTML/) || [];

// Тогда вот это условие сработает
if (!matches.length) {
	console.log('There are no matches!'); 
}
```

**Замена: str.replace**

Метод `str.replace(regexp, replacement)` заменяет совпадения с `regexp` в строке `str` на `replacement` (все, если есть флаг `g`, иначе только первое).

Например:

```js
const reg1 = 'We will, we will'.replace(/we/i, "I"); // I will, we will

const reg2 = 'We will, we will'.replace(/we/gi, "I"); // I will, I will
```

В строке замены `replacement` мы можем использовать специальные комбинации символов для вставки фрагментов совпадения:

Спецсимволы | Действие в строке замены
------ | --------
`$&` | вставляет всё найденное совпадение
`$` | вставляет часть строки до совпадения
`$'` | вставляет часть строки после совпадения
`$n` | если `n` это 1-2 значное число, вставляет содержимое n-й скобочной группы регулярного выражения
`$<name>` | вставляет содержимое скобочной группы с именем `name`
`$$` | вставляет символ `"$"`


Пример с `$&`: 
```js
console.log( 'Люблю HTML'.replace(/HTML/, "$& и Javascript") );
// Люблю HTML и JavaScript
```

**Проверка: regexp.test**

Метод `regexp.test(str)` проверяет, есть ли хоть одно совпадение, если да, то возвращает `true`, иначе `false`.

```js
const str = "Я ЛюБлЮ JavaScript";
const regexp = /люблю/i;

console.log( regexp.test(str) ); // true
```