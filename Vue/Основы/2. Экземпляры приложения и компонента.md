**Создание экземпляра приложения**

Создание любого приложения Vue начинается с создания нового *экземпляра приложения* с помощью функции `createApp`:

```js
const app = Vue.createApp({
	// ... опции
})
```

Экземпляр приложения используется для регистрации «глобальных» вещей, которые будут затем использоваться компонентами внутри этого приложения.

Для примера:

```js
const app = Vue.createApp({})

app.component('SearchInput', SearchInputComponent)
app.directive('focus', FocusDirective)
app.use(LocalePlugin)
```

Большинство из методов экземпляра приложения возвращают этот же экземпляр, что позволяет чейнить вызовы:

```js
Vue.createApp({})
	.component('SearchInput', SearctInputComponent)
	.directive('focus', FocusDirective)
	.use(LocalePlugin)
```

**Корневой компонент**

Опции, передаваемые в `createApp`, используются для настройки *корневого компонента*. При **монтировании** приложения он используется как стартовая точка для отрисовки.

Чтобы примонтировать приложение Vue в `<div id="app"></div>`, необходимо передать `#app`:

```js
const RootComponent = {
  /* опции */
}
const app = Vue.createApp(RootComponent)
const vm = app.mount('#app')
```

В отличие от большинства других методов приложения, `mount` не возвращает экземпляр приложения — вместо этого он возвращает экземпляр корневого компонента.

Зачастую приложение организовано как дерево вложенных, многократно переиспользуемых компонентов. 

Допустим есть структура:
```text
Корневой компонент
└─ TodoList
   ├─ TodoItem
   │  ├─ DeleteTodoButton
   │  └─ EditTodoButton
   └─ TodoListFooter
      ├─ ClearTodosButton
      └─ TodoListStatistics
```

Каждый компонент будеть иметь свой собственный экземпляр компонента `vm`. У некоторых компонентов, таких как `TodoItem`, вероятно, будет несколько экземпляров, отображаемых в один момент времени. Все экземпляры компонентов в этом приложении будут иметь один и тот же экземпляр приложения.

Сейчас достаточно запомнить, что корневой компонент на самом деле ничем не отличается от любого другого компонента.

**Свойства экземпляра компонента**

Все свойства, объявленные в `data`, доступны через экземпляр компонента:

```js
const app = Vue.createApp({
	data() {
		return { count: 4 }
	}
})

const vm = app.mount('#app');

console.log(vm.count); // 4
```

Есть и другие опции компонента, добавляющие в экземпляр компонента пользовательские свойства, например `methods`, `props`, `computed`, `inject` и `setup`. Подробнее - дальше. 

Через экземпляр компонента Vue также предоставляет доступ к некоторым встроенным свойствам, например `$attrs` и `$emit`. Такие свойства всегда именуются с префиксом `$`, чтобы избежать конфликта имён с пользовательскими свойствами.

**Lifecycle hooks**

Хук `created` можно использовать для запуска кода после создания экземпляра:

```js
Vue.createApp({
	data() {
		return { count: 1 }
	},
	created() {
		// this указывает на экземпляр vm
		console.log(`Счетчик: ${this.count}`); // 'Счётчик: 1'
	}
})
```

Также есть и другие хуки, которые будут вызываться на различных этапах жизненного цикла экземпляра, например [`mounted`](https://v3.ru.vuejs.org/ru/api/options-lifecycle-hooks.html#mounted), [`updated`](https://v3.ru.vuejs.org/ru/api/options-lifecycle-hooks.html#updated) и [`unmounted`](https://v3.ru.vuejs.org/ru/api/options-lifecycle-hooks.html#unmounted). Все хуки вызываются с контекстом `this`, указывающим на текущий активный экземпляр, который их вызвал.

Лучше не использовать стрелочные функции в свойствах экземпляра и в коллбеках. 

**Диаграмма жизненного цикла**

![[Pasted image 20220323094857.png]]
