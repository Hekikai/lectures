Доступность контента - это специальные технические и архитектурные решения, которые помогают людям с ограниченными возможностями использовать сайты.

Термин **«доступность контента»** также может обозначаться аббревиатурой *a11y* ("a" followed by 11 more letters, followed by "y").

**Стандарты и руководства**

[Руководство по обеспечению доступности контента (WCAG)](https://www.w3.org/Translations/WCAG20-ru), разработанное консорциумом W3C, описывает рекомендации по созданию сайтов с доступным контентом.

Также есть ресурсы с чек-листами требований WCAG, например:

-   [рекомендации от Wuhcag](https://www.wuhcag.com/wcag-checklist/)
-   [рекомендации от WebAIM](https://webaim.org/standards/wcag/checklist)
-   [рекомендации от A11Y Project](https://a11yproject.com/checklist.html)


**Что касается доступности в веб-приложениях**, то тут мы сталкиваемся с атрибутом *aria-*, который полностью поддерживается в JSX. Его нужно писать кебаб нотацией. 

Также рядом стоит и *семантическая верстка*, которая позволяет учулчшить восприимчивость и понятность сайтов, используя различные HTML-элементы.
Чтобы не нарушать семантическую вёртску на React, стоит использовать `<Fragment>`. Он позволяет обернуть нужную нам верстку без поломки в её структуре.
Если нет необходимости использовать пропсы, то можно использовать сокращенную форму записи - `<>`.

**Доступность контента в формах**

*Подписи*

Каждый элемент управления, например, `<input>` или `<textarea>`, должен иметь подпись, обеспечивающую доступность контента. Подписи нужно выполнять так, чтобы их могли использовать экранные считывающие устройства и другие технические средства реабилитации.

Вот рекомендации о том, как это делать:

-   [демонстрация подписи элементов от консорциума W3C](https://www.w3.org/WAI/tutorials/forms/labels/)
-   [демонстрация подписи элементов от WebAIM](https://webaim.org/techniques/forms/controls)
-   [разъяснения от Paciello Group по доступности наименований](https://www.paciellogroup.com/blog/2017/04/what-is-an-accessible-name/)

Эти стандартные для HTML способы могут использоваться в React напрямую, однако нам не стоит забывать, что атрибут `for` в JSX записывается как `htmlFor`:

```html
<label htmlFor="namedInput">Имя:</label>
<input id="namedInput" type="text" name="name"/>
```

*Сообщения об ошибках*

Ошибки, а также их причины, должны быть понятны всем пользователям. 
Далее приведены ресурсы, которые демонстрируют, как правильно воспроизводить текст сообщений об ошибках с помощью экранных считывающих устройств:

-   [W3C демонстрирует примеры уведомлений пользователя](https://www.w3.org/WAI/tutorials/forms/notifications/)
-   [WebAIM описывает валидацию форм](https://webaim.org/techniques/formvalidation/)

*Управление фокусом*

Приложение с доступным контентом должно функционировать при использовании только клавиатуры. Убедитесь, соответствует ли ваше приложение этому требованию:

-   [обсуждение доступности контента при работе с клавиатурой на сайте WebAIM](https://webaim.org/techniques/keyboard/)

*Фокус клавиатуры и контур элемента*

Фокус клавиатуры указывает на тот элемент в структуре DOM, который в данный момент готов принимать ввод с клавиатуры. Обычно такой элемент выделяется контуром. 

Если мы хотим заменить стандартную реализацию фокуса своей, то убрать обводку можно применив CSS-свойство `outline: 0`.

*Механизмы быстрого перехода к нужному элементу*

На сайте также стоит реализовать механизмы, которые помогают пользователю с помощью клавиатуры быстро переходить к нужному контенту. Тут нам на помощь приходят *скрытые навигационные ссылки* - ссылки для быстрого перехода, которые становятся видимыми, когда пользователь взаимодействует со страницей с помощью клавиатуры.

Такие ссылки очень легко сделать, используя внутренние якоря страницы и CSS:

-   [WebAIM — ссылки для быстрого перехода](https://webaim.org/techniques/skipnav/)

Элементы семантической вёрстки, например, `<main>` или `<aside>`, нужно использовать в качестве секционной разметки, предназначенной для быстрого перехода между логическими частями сайта.

Узнать больше о применении секционной разметки для улучшения доступности контента можно здесь:

-   [использование секционной разметки](https://www.scottohara.me/blog/2018/03/03/landmarks.html)

*Программное управление фокусом*

React-приложения во время своей работы постоянно изменяют структуру DOM. Иногда из-за этого фокус клавиатуры может быть потерян или может перейти на неправильный элемент. Чтобы исправить такую ситуацию, нужно запрограммировать перевод фокуса клавиатуры на нужный элемент. Например, после закрытия модального окна перевести фокус клавиатуры на кнопку, которая его открыла.

В статье на MDN рассматриваются способы [навигации с клавиатуры в JavaScript](https://developer.mozilla.org/ru/docs/Web/Accessibility/Keyboard-navigable_JavaScript_widgets).

Чтобы управлять фокусом в React, можно использовать [[16. Рефы и DOM]].

При таком подходе мы сначала создаём в классе компонента реф на элемент в JSX:

```js
//...
this.textInput = React.createRef();

render() {
	return (
		<input
			type="text"
			ref={this.textInput}
		/>
	);
}
```

Теперь при необходимости можно установить фокус на этот элемент из любого места компонента:

```js
focus() {
  // Устанавливаем фокус на текстовое поле, используя вызов низкоуровневого API DOM
  // Внимание: мы обращаемся к свойству «current», чтобы получить DOM-элемент
  this.textInput.current.focus();
}
```

*Работа с событиями мыши*

Нужно позаботиться о том, чтобы весь функционал, доступный мышке, был доступен и клавиатуре. 

Тут стоит посмотреть в сторону таких обработчиков событий, как `onBlur` и `onFocus`.

*Сложные компоненты*

Усложнение пользовательского интерфейса не должно ухудшать доступность контента. Несмотря на то, что лучший результат достигается при максимальном использовании синтаксиса HTML, даже очень сложный компонент можно сделать доступным для всех.

Каждый тип компонентов имеет специфическую архитектуру и предполагает определённую функциональность, как для пользователей, так и для браузеров:

-   [практические рекомендации WAI-ARIA по архитектуре и компонентам](https://www.w3.org/TR/wai-aria-practices/#aria_ex)
-   [примеры из блога Хейдона Пикеринга (Heydon Pickering)](https://heydonworks.com/article/practical-aria-examples/)
-   [инклюзивные компоненты](https://inclusive-components.design/)

**Стоит обратить внимание на:**

1. Определение языка. Нужно обязательно указывать язык текста на странице. Это необходимо для корректной установки опций экранных считывающих устройств.
2. Заголовок страницы. Всегда устанавливайте заголовок `<title>` для правильного описания контента текущей страницы. Это позволит пользователю постоянно быть в курсе контекста страницы.
3. Цветовая контрастность. Убедитесь, что все тексты на вашем сайте имеют правильную цветовую контрастность, чтобы обеспечить максимальное удобство чтения для пользователей с плохим зрением:

-   [разъяснение требований WCAG к цветовой контрастности](https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html)
-   [всё о цветовой контрастности и о том, почему вы должны переосмыслить подход к ней](https://www.smashingmagazine.com/2014/10/color-contrast-tips-and-tools-for-accessibility/)
-   [статья о цветовой контрастности на сайте A11y Project](https://a11yproject.com/posts/what-is-color-contrast/)

Ручной расчёт правильных цветовых комбинаций для всех вариантов сайта может быть очень утомительным. Вместо этого вы можете рассчитать все необходимые палитры [с помощью Colorable](https://jxnblk.com/colorable/).

Если вы хотите провести более полное тестирование контрастности, то можете воспользоваться этими программами:

-   [WebAIM — Color Contrast Checker](https://webaim.org/resources/contrastchecker/)
-   [The Paciello Group — Color Contrast Analyzer](https://www.paciellogroup.com/resources/contrastanalyser/)

**Инструменты для разработки и тестирования**

*Тестирование клавиатуры*

Самый простой и одновременно наиболее важный вид проверки — это тестирование клавиатуры. Такая проверка позволяет определить доступность контента на вашем сайте при работе только с клавиатурой. Чтобы протестировать клавиатуру, выполните следующие действия:

1.  Отключите мышь.
2.  Используйте `Tab` и `Shift+Tab` для перемещения по странице.
3.  Используйте `Enter` для активации элементов.
4.  Там, где необходимо, используйте клавиши со стрелками, например, для работы с меню или выпадающими списками.

*Экранные считывающие устройства*

Проверка работы экранных считывающих устройств должна быть частью комплексного тестирования доступности контента.

Учтите, что сочетание браузера и экранного считывающего устройства имеет большое значение. Рекомендуется протестировать ваше приложение в том браузере, который лучше всего подходит для избранного вами экранного считывателя.
